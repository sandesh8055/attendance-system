<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SITA Attendance Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg:#f4f6f9; --card:#ffffff; --text:#111827; --muted:#6b7280;
    --border:#e5e7eb; --primary:#0f2a3d; --accent:#2563eb;
}
[data-theme="dark"] {
    --bg:#0b1220; --card:#111827; --text:#e5e7eb;
    --muted:#9ca3af; --border:#1f2937; --primary:#020617;
    --accent:#3b82f6;
}

* { box-sizing:border-box; }

body {
    margin:0;
    font-family:"Segoe UI",Arial,sans-serif;
    min-height:100vh;
    background:
      linear-gradient(rgba(15,42,61,.65), rgba(15,42,61,.65)),
      url("assets/airport-bg.jpg");
    background-size:cover;
    background-position:center;
    display:flex;
    align-items:center;
    justify-content:center;
}

.app {
    width:100%;
    max-width:520px;
    background:var(--card);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 20px 45px rgba(0,0,0,.35);
}

.header {
    display:flex;
    align-items:center;
    gap:12px;
    padding:16px;
    border-bottom:1px solid var(--border);
}

.header img { height:34px; }

.header h1 {
    margin:0;
    font-size:17px;
    color:var(--primary);
}

.header span {
    font-size:12px;
    color:var(--muted);
}

.toggle {
    margin-left:auto;
    background:none;
    border:none;
    cursor:pointer;
    font-size:16px;
}

.body { padding:22px; }

label {
    display:block;
    margin-top:14px;
    font-size:13px;
    font-weight:600;
}

select, input {
    width:100%;
    margin-top:6px;
    padding:10px;
    font-size:14px;
    border-radius:6px;
    border:1px solid var(--border);
}

.info {
    margin-top:16px;
    padding:10px;
    font-size:12.5px;
    background:#f9fafb;
    border-left:4px solid var(--accent);
}

button {
    width:100%;
    margin-top:22px;
    padding:12px;
    background:var(--accent);
    color:#fff;
    border:none;
    border-radius:6px;
    font-size:15px;
    font-weight:600;
    cursor:pointer;
}

#message {
    margin-top:14px;
    text-align:center;
    font-weight:600;
    font-size:13px;
}

.footer {
    text-align:center;
    font-size:11px;
    color:var(--muted);
    padding:10px;
    border-top:1px solid var(--border);
}
</style>
</head>

<body>

<div class="app">
    <div class="header">
        <img src="assets/sita-logo.png" alt="SITA">
        <div>
            <h1>Attendance Portal</h1>
            <span>Mumbai Airport ‚Äì Operations</span>
        </div>
        <button id="themeToggle" class="toggle">üåô</button>
    </div>

    <div class="body">
        <form id="attendanceForm">

            <label>Staff Name</label>
            <select id="name">
                <option value="">Select</option>
                <option>Sandesh Duduskar</option>
                <option>Aaditya Dalavi</option>
                <option>Ajit Gaikwad</option>
                <option>Akhilesh Gaddam</option>
                <option>Amin Shaikh</option>
                <option>Amol_Dhurvaraj Mohite</option>
                <option>Aniket Anant_Kadam</option>
                <option>Aniket Apte</option>
                <option>Aniket Tawate</option>
                <option>Anup Patil</option>
                <option>Dattatraya Mane</option>
                <option>Dinesh Gowda</option>
                <option>Dominic Fernandes</option>
                <option>Fahad Mulla</option>
                <option>Gaurav Sarode</option>
                <option>Kiran Manik Kadam</option>
                <option>Mahesh Shinde</option>
                <option>Mangesh Lele</option>
                <option>Neeraj Rathour</option>
                <option>Nikhil Mandhare</option>
                <option>Nitesh Yadav</option>
                <option>Prasad Patil</option>
                <option>Prashant Dhavale</option>
                <option>Prathamesh Patil</option>
                <option>Pratik Avhad</option>
                <option>Rahul Bibhutinath Thakur</option>
                <option>Rakesh Sunder Amin</option>
                <option>Ravindra Kumar</option>
                <option>Roshan Rane</option>
                <option>Sandip Bandarkar</option>
                <option>Santosh Jadhav</option>
                <option>Satish Panchal</option>
                <option>Teetus Joseph</option>
                <option>Vaibhav Barhate</option>
                <option>Vicky Kurkure</option>
                <option>Vijay Parale</option>
                <option>Wexlin Shobhuraj</option>
                <option>Yogesh Vaidya</option>
            </select>

            <label>Terminal</label>
            <select id="terminal">
                <option value="">Select</option>
                <option>T1</option>
                <option>T2</option>
                <option>NMIAL</option>
                <option>Outside Airport</option>
            </select>

            <label>Shift</label>
            <select id="shift">
                <option value="">Select</option>
                <option>Day</option>
                <option>Night</option>
            </select>

            <label>Date</label>
            <input type="date" id="date">

            <label>Time</label>
            <input type="time" id="time">

            <div class="info" id="geoInfo">
                üìç Getting device location‚Ä¶
            </div>

            <button type="submit">Submit Attendance</button>
        </form>

        <div id="message"></div>
    </div>

    <div class="footer">
        Pilot Tool ‚Ä¢ Internal Use Only ‚Ä¢ SITA
    </div>
</div>

<script>
/* üî¥ PUT YOUR GOOGLE APPS SCRIPT WEB APP URL HERE */
const scriptURL = "https://script.google.com/macros/s/AKfycbyWIw1ARMO0EvuNGl-XxZHHauVLD6rqUmDKvGWksBdNXuHeyjsAmUR_qHWeVpEfWYzxUQ/exec";

/* DOM */
const form = document.getElementById("attendanceForm");
const nameF = document.getElementById("name");
const termF = document.getElementById("terminal");
const shiftF = document.getElementById("shift");
const dateF = document.getElementById("date");
const timeF = document.getElementById("time");
const geo = document.getElementById("geoInfo");
const msg = document.getElementById("message");

/* Theme */
const root = document.documentElement;
const tBtn = document.getElementById("themeToggle");
const savedTheme = localStorage.getItem("theme");
if (savedTheme) {
    root.dataset.theme = savedTheme;
    tBtn.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
}
tBtn.onclick = () => {
    const dark = root.dataset.theme === "dark";
    root.dataset.theme = dark ? "light" : "dark";
    localStorage.setItem("theme", root.dataset.theme);
    tBtn.textContent = dark ? "üåô" : "‚òÄÔ∏è";
};

/* Auto date & time */
const now = new Date();
dateF.value = now.toISOString().split("T")[0];
timeF.value =
    String(now.getHours()).padStart(2,'0') + ":" +
    String(now.getMinutes()).padStart(2,'0');

/* GPS */
let gps = "N/A";
let locationStatus = "Outside Airport";
let gpsReady = false;

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
        pos => {
            gps = pos.coords.latitude.toFixed(5) + "," + pos.coords.longitude.toFixed(5);
            locationStatus = "GPS Captured";
            geo.innerText = "üìç " + gps;
            gpsReady = true;
        },
        () => {
            geo.innerText = "‚ö†Ô∏è Location permission denied";
        }
    );
} else {
    geo.innerText = "‚ö†Ô∏è GPS not supported on this device";
}

/* Submit */
form.addEventListener("submit", e => {
    e.preventDefault();

    if (!nameF.value || !termF.value || !shiftF.value || !gpsReady) {
        msg.textContent = "Please wait for location and fill all required fields";
        msg.style.color = "red";
        return;
    }

    fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
            name: nameF.value,
            terminal: termF.value,
            shift: shiftF.value,
            date: dateF.value,
            time: timeF.value,
            gps,
            locationStatus
        })
    })
    .then(r => r.json())
    .then(d => {
        msg.textContent =
            d.result === "duplicate"
            ? "Attendance already marked"
            : "Attendance recorded successfully";

        msg.style.color =
            d.result === "duplicate" ? "orange" : "green";

        if (d.result !== "duplicate") {
            setTimeout(() => {
                msg.textContent = "";
                form.reset();
                gpsReady = false;
                geo.innerText = "üìç Refreshing location‚Ä¶";
            }, 2000);
        }
    })
    .catch(() => {
        msg.textContent = "Error saving attendance";
        msg.style.color = "red";
    });
});
</script>

</body>

</html>







